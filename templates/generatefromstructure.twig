{#
 ~ Alxarafe. Development of PHP applications in a flash!
 ~ Copyright (C) 2018 Alxarafe <info@alxarafe.com>
#}
{% extends "index.twig" %}

{% block body %}
    {# TODO: This is not working? #}
    {{ view.newRow(view.blockContainer(main.title))|raw }}

    <form action="{{ constant('BASE_URI') }}/index.php?{{ constant('CALL_CONTROLLER') }}=ExportStructure&{{ constant('METHOD_CONTROLLER') }}=main" method='post' accept-charset="utf-8">
        <div class="container-fluid">
            {% if (message) %}{{ message }}{% endif %}

            <div class="row">
                <div class="col-sm-12">
                    {{ lang.trans('select-tables-to-generate-models-controllers') }}
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">&nbsp;</div>
            </div>
            <div class="row">
                <div class="col-sm-2">
                    <b>{{ lang.trans('table-name') }}</b>
                </div>
                <div class="col-sm-3">
                    <b>{{ lang.trans('path-to-file') }}</b>
                </div>
                <div class="col-sm-3">
                    <b>{{ lang.trans('model-name') }}</b>
                </div>
                <div class="col-sm-3">
                    <b>{{ lang.trans('controller-name') }}</b>
                </div>
                <div class="col-sm-1">
                    <b>{{ lang.trans('selected') }}</b>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">&nbsp;</div>
            </div>
            <div class="row">
                {% for tableName, filePath in ctrl.tables %}
                    {% set modelName = TwigFunctions('snakeToCamel', tableName) %}
                    {% set controllerName = TwigFunctions('snakeToCamel', tableName) %}
                    <div class="col-sm-2">
                            <input type="text" class="form-control" name="tables[]" value="{{ tableName }}">
                    </div>
                    <div class="col-sm-3">
                            <input type="text" class="form-control" name="files[]" value="{{ filePath }}">
                    </div>
                    <div class="col-sm-3">
                        <input type="text" class="form-control" name="models[]" value="{{ modelName }}">
                    </div>
                    <div class="col-sm-3">
                        <input type="text" class="form-control" name="controllers[]" value="{{ controllerName }}">
                    </div>
                    <div class="col-sm-1">
                        <div class="checkbox">
                            <label>
                                <input type="checkbox" name="selected[]" value="{{ table }}">
                            </label>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="row">
                <div class="col-sm-12">&nbsp;</div>
            </div>
            <div class="row">
                <div class="col-sm-6">
                    <button name="action" type="submit" class="btn btn-default btn-danger" value="cancel">
                        {{ lang.trans('exit') }}
                    </button>
                </div>
                <div class="col-sm-6 text-right">
                    <button name="action" type="submit" class="btn btn-default btn-primary" value="export-selected">
                        {{ lang.trans('generate-selected') }}
                    </button>
                    <button name="action" type="submit" class="btn btn-default btn-primary" value="export-all">
                        {{ lang.trans('generate-all') }}
                    </button>
                </div>
            </div>
        </div>
    </form>
{% endblock %}

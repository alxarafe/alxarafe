<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta content="index, follow, all" name="robots"/>
    <title>Alxarafe\Core\Helpers\Schema | Alxarafe</title>

    <link href="../../../css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../../../css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
    <link href="../../../css/sami.css" rel="stylesheet" type="text/css">
    <script src="../../../js/jquery-1.11.1.min.js"></script>
    <script src="../../../js/bootstrap.min.js"></script>
    <script src="../../../js/typeahead.min.js"></script>
    <script src="../../../sami.js"></script>
    <meta content="width" name="MobileOptimized">
    <meta content="true" name="HandheldFriendly">
    <meta content="width=device-width,initial-scale=1,maximum-scale=1" name="viewport">


</head>

<body data-name="class:Alxarafe_Core_Helpers_Schema" data-root-path="../../../" id="class">
<div id="content">
    <div id="left-column">
        <div id="control-panel">
            <script>
                $('option[data-version="' + window.projectVersion + '"]').prop('selected', true);
            </script>
            <form action="../../../search.html" id="search-form" method="GET">
                <span class="glyphicon glyphicon-search"></span>
                <input class="typeahead form-control"
                       name="search"
                       placeholder="Search"
                       type="search">
            </form>
        </div>

        <div id="api-tree"></div>

    </div>
    <div id="right-column">
        <nav class="navbar navbar-default" id="site-nav" role="navigation">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button class="navbar-toggle" data-target="#navbar-elements" data-toggle="collapse" type="button">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../index.html">Alxarafe</a>
                </div>
                <div class="collapse navbar-collapse" id="navbar-elements">
                    <ul class="nav navbar-nav">
                        <li><a href="../../../classes.html">Classes</a></li>
                        <li><a href="../../../namespaces.html">Namespaces</a></li>
                        <li><a href="../../../interfaces.html">Interfaces</a></li>
                        <li><a href="../../../traits.html">Traits</a></li>
                        <li><a href="../../../doc-index.html">Index</a></li>
                        <li><a href="../../../search.html">Search</a></li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="namespace-breadcrumbs">
            <ol class="breadcrumb">
                <li><span class="label label-default">class</span></li>
                <li><a href="../../../Alxarafe.html">Alxarafe</a></li>
                <li class="backslash">\</li>
                <li><a href="../../../Alxarafe/Core.html">Core</a></li>
                <li class="backslash">\</li>
                <li><a href="../../../Alxarafe/Core/Helpers.html">Helpers</a></li>
                <li class="backslash">\</li>
                <li>Schema</li>
            </ol>
        </div>
        <div id="page-content">

            <div class="page-header">
                <h1>
                    Schema

                </h1>
            </div>

            <p> class
                <strong>Schema</strong>
            </p>


            <div class="description">
                <p>The Schema class contains static methods that allow you to manipulate the
                    database. It is used to create and modify tables and indexes in the database.</p></div>


            <h2>Properties</h2>

            <table class="table table-condensed">
                <tr>
                    <td class="type" id="property_files">
                        static private array
                    </td>
                    <td>$files</td>
                    <td class="last">Content files yet readed.</td>
                    <td></td>
                </tr>
            </table>


            <h2>Methods</h2>

            <div class="container-fluid underlined">
                <div class="row">
                    <div class="col-md-2 type">

                    </div>
                    <div class="col-md-8 type">
                        <a href="#method___construct">__construct</a>()

                        <p>Schema constructor.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_saveStructure">saveStructure</a>()

                        <p>It collects the information from the database and creates files in YAML format
                            for the reconstruction of its structure. Also save the view structure.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;bool
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_saveTableStructure">saveTableStructure</a>(string $table)

                        <p>Return true if complete table structure was saved, otherwise return false.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_mergeArray">mergeArray</a>(array $struct, array $data, bool $isView = false)

                        <p>Merge the existing yaml file with the structure of the database,
                            prevailing the latter.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_mergeViewData">mergeViewData</a>(array $struct, array $data)

                        <p>Verify the parameters established in the yaml file with the structure of the database,
                            creating the missing data
                            and correcting the possible errors.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_mergeViewField">mergeViewField</a>(string $field, array $values, array
                        $fieldData)

                        <p>Verify the $fieldData established in the yaml file with the structure of
                            the database, creating the missing data and correcting the possible errors.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_getFromYamlFile">getFromYamlFile</a>(string $tableName, string $type = &#039;schema&#039;)

                        <p>Returns an array with data from the specified yaml file</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;string
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_getSchemaFileName">getSchemaFileName</a>(string $tableName, string $type =
                        &#039;schema&#039;)

                        <p>Returns the path to the specified file, or empty string if it does not exist.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_loadDataFromCsv">loadDataFromCsv</a>(string $fileName)

                        <p>Load data from CSV file.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_loadDataFromYaml">loadDataFromYaml</a>(string $fileName)

                        <p>Load data from Yaml file.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;bool
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_saveSchemaFileName">saveSchemaFileName</a>(array $data, string $tableName,
                        string $type = &#039;schema&#039;)

                        <p>Save the data array in a .yaml file</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_setNormalizedStructure">setNormalizedStructure</a>(array $structure, string
                        $tableName)

                        <p>Normalize an array that has the file structure defined in the model by setStructure, so that
                            it has fields with
                            all the values it must have. Those that do not exist are created with the default value,
                            avoiding having to do
                            the check each time, or calculating their value based on the data provided by the other
                            fields.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array|null
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_normalizeField">normalizeField</a>(string $tableName, string $field, array
                        $structure)

                        <p>Take the definition of a field, and make sure you have all the information that is necessary
                            for its creation or
                            maintenance, calculating the missing data if possible. It can cause an exception if some
                            vital data is missing,
                            but this should only occur at the design stage.</p></div>
                    <div class="col-md-2"></div>
                </div>
                <div class="row">
                    <div class="col-md-2 type">
                        static&nbsp;array
                    </div>
                    <div class="col-md-8 type">
                        <a href="#method_setValues">setValues</a>(string $tableName, array $values)

                        <p>Create the SQL statements to fill the table with default data.</p></div>
                    <div class="col-md-2"></div>
                </div>
            </div>


            <h2>Details</h2>

            <div id="method-details">
                <div class="method-item">
                    <h3 id="method___construct">
                        <div class="location">at line 38</div>
                        <code>
                            <strong>__construct</strong>()
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Schema constructor.</p></div>
                        <div class="tags">


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_saveStructure">
                        <div class="location">at line 50</div>
                        <code> static
                            <strong>saveStructure</strong>()
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>It collects the information from the database and creates files in YAML format
                                for the reconstruction of its structure. Also save the view structure.</p></div>
                        <div class="tags">


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_saveTableStructure">
                        <div class="location">at line 67</div>
                        <code> static bool
                            <strong>saveTableStructure</strong>(string $table)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Return true if complete table structure was saved, otherwise return false.</p>
                            <p>If the name of the table includes the prefix used in the database, it is
                                removed from the name of the table.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$table</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>bool</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_mergeArray">
                        <div class="location">at line 91</div>
                        <code> static protected array
                            <strong>mergeArray</strong>(array $struct, array $data, bool $isView = false)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Merge the existing yaml file with the structure of the database,
                                prevailing the latter.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td>$struct</td>
                                    <td>current database table structure</td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$data</td>
                                    <td>current yaml file structure</td>
                                </tr>
                                <tr>
                                    <td>bool</td>
                                    <td>$isView</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_mergeViewData">
                        <div class="location">at line 110</div>
                        <code> static protected array
                            <strong>mergeViewData</strong>(array $struct, array $data)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Verify the parameters established in the yaml file with the structure of the database,
                                creating the missing data
                                and correcting the possible errors.</p>
                            <p>Posible data: unique, min, max, length, pattern, placeholder, label &amp; shortlabel</p>
                        </div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td>$struct</td>
                                    <td>current database table structure</td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$data</td>
                                    <td>current yaml file data</td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_mergeViewField">
                        <div class="location">at line 131</div>
                        <code> static protected array
                            <strong>mergeViewField</strong>(string $field, array $values, array $fieldData)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Verify the $fieldData established in the yaml file with the structure of
                                the database, creating the missing data and correcting the possible errors.</p>
                            <p>Posible data: unique, min, max, length, pattern, placeholder, label &amp; shortlabel</p>
                        </div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$field</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$values</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$fieldData</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_getFromYamlFile">
                        <div class="location">at line 163</div>
                        <code> static array
                            <strong>getFromYamlFile</strong>(string $tableName, string $type = &#039;schema&#039;)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Returns an array with data from the specified yaml file</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$type</td>
                                    <td>must be 'schema' or 'viewdata'</td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_getSchemaFileName">
                        <div class="location">at line 187</div>
                        <code> static private string
                            <strong>getSchemaFileName</strong>(string $tableName, string $type = &#039;schema&#039;)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Returns the path to the specified file, or empty string if it does not exist.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td>name of the file without extension (assumes .yaml or .csv according to the
                                        type)
                                    </td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$type</td>
                                    <td>It's the foldername (in lowercase). It's usually schema (by default) or
                                        viewdata.
                                    </td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_loadDataFromCsv">
                        <div class="location">at line 217</div>
                        <code> static array
                            <strong>loadDataFromCsv</strong>(string $fileName)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Load data from CSV file.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$fileName</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_loadDataFromYaml">
                        <div class="location">at line 234</div>
                        <code> static array
                            <strong>loadDataFromYaml</strong>(string $fileName)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Load data from Yaml file.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$fileName</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_saveSchemaFileName">
                        <div class="location">at line 262</div>
                        <code> static private bool
                            <strong>saveSchemaFileName</strong>(array $data, string $tableName, string $type = &#039;schema&#039;)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Save the data array in a .yaml file</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td>$data</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$type</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>bool</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_setNormalizedStructure">
                        <div class="location">at line 283</div>
                        <code> static array
                            <strong>setNormalizedStructure</strong>(array $structure, string $tableName)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Normalize an array that has the file structure defined in the model by setStructure, so
                                that it has fields with
                                all the values it must have. Those that do not exist are created with the default value,
                                avoiding having to do
                                the check each time, or calculating their value based on the data provided by the other
                                fields.</p>
                            <p>It also ensures that the keys and default values exist as an empty array if they did not
                                exist.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td>$structure</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_normalizeField">
                        <div class="location">at line 307</div>
                        <code> static protected array|null
                            <strong>normalizeField</strong>(string $tableName, string $field, array $structure)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Take the definition of a field, and make sure you have all the information that is
                                necessary for its creation or
                                maintenance, calculating the missing data if possible. It can cause an exception if some
                                vital data is missing,
                                but this should only occur at the design stage.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>string</td>
                                    <td>$field</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$structure</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array|null</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
                <div class="method-item">
                    <h3 id="method_setValues">
                        <div class="location">at line 333</div>
                        <code> static array
                            <strong>setValues</strong>(string $tableName, array $values)
                        </code>
                    </h3>
                    <div class="details">


                        <div class="method-description">
                            <p>Create the SQL statements to fill the table with default data.</p></div>
                        <div class="tags">
                            <h4>Parameters</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>string</td>
                                    <td>$tableName</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>array</td>
                                    <td>$values</td>
                                    <td></td>
                                </tr>
                            </table>


                            <h4>Return Value</h4>

                            <table class="table table-condensed">
                                <tr>
                                    <td>array</td>
                                    <td></td>
                                </tr>
                            </table>


                        </div>
                    </div>

                </div>
            </div>


        </div>
        <div id="footer">
            Generated by <a href="http://sami.sensiolabs.org/">Sami, the API Documentation Generator</a>.
        </div>

    </div>
</div>
</body>

</html>
